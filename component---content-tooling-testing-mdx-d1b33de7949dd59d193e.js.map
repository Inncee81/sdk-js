{"version":3,"sources":["webpack:///./content/tooling/testing.mdx","webpack:///./node_modules/@primer/gatsby-theme-doctocat/src/components/table-of-contents.js","webpack:///./node_modules/@primer/gatsby-theme-doctocat/src/components/layout.js"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutPropertiesLoose","Object","_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__","assign","mdxType","_primer_components__WEBPACK_IMPORTED_MODULE_8__","_primer_styled_octicons__WEBPACK_IMPORTED_MODULE_9__","mr","href","parentName","className","as","mt","mb","fontSize","color","scheme","_primer_gatsby_theme_doctocat_src_components_inline_code__WEBPACK_IMPORTED_MODULE_10__","isMDXComponent","TableOfContentsItems","_ref2","items","_React$useContext2","React","useContext","MDXContext","_React$useContext2$ul","ul","List","_React$useContext2$li","li","ListItem","_React$useContext2$a","a","Link","react_default","createElement","map","item","key","url","title","TableOfContents","_React$useContext$h","h2","H2","Fragment","Layout","children","pageContext","h1","H1","index_esm","flexDirection","minHeight","head","frontmatter","description","header","flex","display","sidebar","container","status","status_label","tableOfContents","table_of_contents","editUrl","my","icon","Pencil"],"mappings":"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","file":"component---content-tooling-testing-mdx-d1b33de7949dd59d193e.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/smudge/Code/Xedi/libraries/sdk/js/docs/node_modules/@primer/gatsby-theme-doctocat/src/components/layout.js\";\nimport { Text, Link, Flash } from '@primer/components';\nimport { InfoIcon } from '@primer/styled-octicons';\nimport InlineCode from '@primer/gatsby-theme-doctocat/src/components/inline-code';\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <p>{`Testing our code often feels like a chore, or something we leave until last. For most, testing is the mashed potatoes of development. It makes up the majority of the task and isn't the most attractive thing on our plate.`}</p>\n    <p>{`In this section we'll look at using unit tests to test our code to provide confidence that any changes we make don't break other behaviours within the SDK.`}</p>\n    <Flash mdxType=\"Flash\">\n    <InfoIcon mr={2} mdxType=\"InfoIcon\" />\n    If you are looking for information on manual testing, read the <Link href=\"/tooling/debugging\" mdxType=\"Link\">debugging</Link> section.\n    </Flash>\n    <h2>{`Directory Structure`}</h2>\n    <p>{`Testing (at the time of writing) focusses on the behaviors of the SDK, rather than a broad spread approach. This maps to how the files and directories are structured. Rather than mimicking the `}<inlineCode parentName=\"p\">{`src`}</inlineCode>{` directory structure, the directories are structured based on the hierarchy at runtime. So for `}<inlineCode parentName=\"p\">{`Xedi.Auth`}</inlineCode>{`, you would find those tests in `}<inlineCode parentName=\"p\">{`tests/Unit/Auth`}</inlineCode>{` and so on.`}</p>\n    <p>{`Through-out this page, I will continue to use Marvel's Avengers as a subject material. I'm going to test an API that lists the members of the Avengers.`}</p>\n    <p>{`First I need a directory, so I will create `}<inlineCode parentName=\"p\">{`tests/Unit/Avengers`}</inlineCode>{`.`}</p>\n    <p>{`Next I need to test each function in my Avengers API. At present I have one function, `}<inlineCode parentName=\"p\">{`list()`}</inlineCode>{`, so I create `}<inlineCode parentName=\"p\">{`List.test.ts`}</inlineCode>{` in my `}<inlineCode parentName=\"p\">{`Avengers`}</inlineCode>{` directory.`}</p>\n    <h2>{`Authoring a test`}</h2>\n    <p>{`Once I have my file, I can start writing my test. Because we are using `}<Link href=\"https://mochajs.org/\" mdxType=\"Link\">{`MochaJS`}</Link>{` as a testing framework we get a couple of functions included by default.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`import { assert } from 'chai';\nimport { Collection, Avenger } from '../../../src/Models/Models';\nimport Avengers from '../../../src/Services/Avengers';\nimport Axios, { AxiosInstance } from 'axios';\nimport Config from '../../../src/Config/Config;\nimport JsonResponse from '../../../src/Interfaces/JsonResponse;\nimport nock from 'nock';\n\ndescribe('Avengers@list', () => {\n    it('should return a list of avengers', async () => {\n        const positiveResponse: JsonResponse<Collection<Avenger>> = {\n            data: [\n                {\n                    \"_id\": 1,\n                    \"email\": \"t.stark@avengers.org\",\n                    \"first_name\": \"Anthony\",\n                    \"last_name\": \"Stark\",\n                    \"job_title\": \"Iron Man\"\n                },\n                {\n                    \"_id\": 2,\n                    \"email\": \"s.rogers@avengers.org\",\n                    \"first_name\": \"Steve\",\n                    \"last_name\": \"Rogers\",\n                    \"job_title\": \"Captain America\"\n                }\n            ]\n        };\n\n        nock(\"https://api.xedi.com\")\n            .get(\"/1/avengers\")\n            .reply(200, positiveResponse);\n\n        const configBag = new Config();\n        const httpClient: AxiosInstance = new Axios({\n            baseUrl: 'https://api.xedi.com'\n        });\n\n        const avengersAPI = new Avengers(configBag, httpClient);\n\n        const result = await avengersApi.list();\n\n        assert.isArray(result);\n        assert.lengthOf(result, 2);\n    });\n});\n`}</code></pre>\n    <Text as=\"p\" mt={2} mb={3} fontSize={1} color=\"gray.5\" mdxType=\"Text\">tests/Unit/Avengers/List.test.ts</Text>\n    <p>{`Lets examine this test.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Below the `}<inlineCode parentName=\"p\">{`import`}</inlineCode>{` statements is the entrypoint for the framework. In this file we are describing the list functionality of the Avengers API. Therefore, `}<inlineCode parentName=\"p\">{`Avengers@list`}</inlineCode>{` is what will appear in the results output.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We have one behavioural test, in which we assert `}<inlineCode parentName=\"p\">{`it should return a list of avengers`}</inlineCode>{`. Because this method contains a `}<Text as=\"em\" mdxType=\"Text\">{`asynchronous`}</Text>{` http request, we denote that the this test is also asynchronous with the `}<inlineCode parentName=\"p\">{`async`}</inlineCode>{` keyword.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Personal preference, I have added a fixture at the top of the test. This could easily be done inline or in a separate file.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We use `}<Link href=\"https://github.com/nock/nock\" mdxType=\"Link\">{`Nock`}</Link>{` to intercept requests to the API Gateway and return predefined responses to matching endpoints.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We then need to setup our class. This concludes the the setup phase of our tests.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We invoke the subject function `}<inlineCode parentName=\"p\">{`list()`}</inlineCode>{` and assign the response to a `}<inlineCode parentName=\"p\">{`const`}</inlineCode>{` value.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We enter the assert phase, and utilize functions from `}<Link href=\"https://chaijs.com\" mdxType=\"Link\">{`Chai.js`}</Link>{` to test the response.`}</p>\n      </li>\n    </ul>\n    <Flash scheme=\"yellow\" mdxType=\"Flash\">\n    <InfoIcon mr={2} mdxType=\"InfoIcon\" />\n    It's important to remember that Mocha will pass any test that doesn't error. This is the primary reason I've used <InlineCode mdxType=\"InlineCode\">async/await</InlineCode> rather than <InlineCode mdxType=\"InlineCode\">then/catch</InlineCode>.\n    </Flash>\n    <h2>{`Running your test`}</h2>\n    <p>{`Now that I've written my test, lets see if it will run. Simply run: `}<InlineCode mdxType=\"InlineCode\">{`npm run test`}</InlineCode>{`.`}</p>\n    <p>{`I will also check my code conforms to best-practice. For this run: `}<InlineCode mdxType=\"InlineCode\">{`npm run lint:tests`}</InlineCode>{`. If you want to know more about this, read the section on `}<Link href=\"/tooling/linting\" mdxType=\"Link\">{`Linting`}</Link>{`.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import {MDXContext} from '@mdx-js/react'\nimport React from 'react'\n\nfunction TableOfContents({items}) {\n  const {h2: H2 = 'h2'} = React.useContext(MDXContext)\n\n  return (\n    <>\n      <H2>Table of contents</H2>\n      <TableOfContentsItems items={items} />\n    </>\n  )\n}\n\nfunction TableOfContentsItems({items}) {\n  const {\n    ul: List = 'ul',\n    li: ListItem = 'li',\n    a: Link = 'a',\n  } = React.useContext(MDXContext)\n\n  return (\n    <List>\n      {items.map(item => (\n        <ListItem key={item.url}>\n          <Link href={item.url}>{item.title}</Link>\n          {item.items ? <TableOfContentsItems items={item.items} /> : null}\n        </ListItem>\n      ))}\n    </List>\n  )\n}\n\nexport default TableOfContents\n","import {MDXContext} from '@mdx-js/react'\nimport {Box, Flex, Link, StyledOcticon} from '@primer/components'\nimport {Pencil} from '@primer/octicons-react'\nimport React from 'react'\nimport Container from './container'\nimport Head from './head'\nimport Header from './header'\nimport Sidebar from './sidebar'\nimport TableOfContents from './table-of-contents'\nimport StatusLabel from './status-label'\n\nfunction Layout({children, pageContext}) {\n  const {h1: H1 = 'h1'} = React.useContext(MDXContext)\n\n  return (\n    <Flex flexDirection=\"column\" minHeight=\"100vh\">\n      <Head\n        title={pageContext.frontmatter.title}\n        description={pageContext.frontmatter.description}\n      />\n      <Header />\n      <Flex flex=\"1 1 auto\" flexDirection=\"row\">\n        <Box display={['none', null, null, 'block']}>\n          <Sidebar />\n        </Box>\n        <Container>\n          <H1>{pageContext.frontmatter.title}</H1>\n\n          {pageContext.frontmatter.status ? (\n            <Box mb={4}>\n              <StatusLabel status={pageContext.frontmatter.status} />\n            </Box>\n          ) : null}\n\n          {pageContext.tableOfContents.items ? (\n            <TableOfContents items={pageContext.tableOfContents.items} />\n          ) : null}\n\n          {children}\n\n          {pageContext.editUrl ? (\n            <Box my={6}>\n              <Link href={pageContext.editUrl}>\n                <StyledOcticon icon={Pencil} mr={2} />\n                Edit this page on GitHub\n              </Link>\n            </Box>\n          ) : null}\n        </Container>\n      </Flex>\n    </Flex>\n  )\n}\n\nexport default Layout\n"],"sourceRoot":""}