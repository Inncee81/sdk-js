(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{731:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",function(){return r}),n.d(t,"default",function(){return p});n(9),n(10),n(7),n(13),n(11),n(0);var a=n(99),c=n(748),s=n(4);var r={},l={_frontmatter:r},i=c.a;function p(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,c={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,["components"]);return Object(a.c)(i,Object.assign({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.c)("h1",null,"Introduction"),Object(a.c)("p",null,"The Auth api controls access to the system. Read more about our ",Object(a.c)(s.k,{href:"/architecture/authentication",mdxType:"Link"},"authentication architecture here"),"."),Object(a.c)("h1",null,"Events"),Object(a.c)("p",null,"This service emits events. To learn more about events ",Object(a.c)(s.k,{href:"/architecture/events",mdxType:"Link"},"here"),"."),Object(a.c)("h2",null,"auth_updated"),Object(a.c)("p",null,"When the authentication state changes; ",Object(a.c)("inlineCode",{parentName:"p"},"auth_updated")," is emitted."),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-typescript"}),"type AuthenticationUpdatedEvent {\n    method: string;\n    date: {\n        user: User;\n        business?: Business;\n        refresh_token: RefreshToken;\n        access_token: AccessToken;\n    }\n}\n")),Object(a.c)("h2",null,"auth_deleted"),Object(a.c)("p",null,"When the authentication state is revoked; ",Object(a.c)("inlineCode",{parentName:"p"},"auth_deleted")," is emitted."),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-typescript"}),"type AuthenticationDeletedEvent {\n    method: string;\n}\n")),Object(a.c)("h1",null,"Properties"),Object(a.c)("h2",null,"business"),Object(a.c)("p",null,"Gets the current business context."),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"const currentBusiness: Business = Xedi.Auth.business;\n")),Object(a.c)("h2",null,"users"),Object(a.c)("p",null,"Gets the logged in user."),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"const currentUser: User = Xedi.Auth.user;\n")),Object(a.c)("h1",null,"Usage"),Object(a.c)("h2",null,"login"),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Parameters")),Object(a.c)("table",null,Object(a.c)("thead",{parentName:"table"},Object(a.c)("tr",{parentName:"thead"},Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Property"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Type"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"center"}),"Required"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Example"))),Object(a.c)("tbody",{parentName:"table"},Object(a.c)("tr",{parentName:"tbody"},Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"email"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"String"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"center"}),"✔"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"t.stark@avengers.org")),Object(a.c)("tr",{parentName:"tbody"},Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"password"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"String"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"center"}),"✔"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"izJ7Y0MBwcJ8")))),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Usage")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"await Xedi.Auth.login('t.stark@avengers.org', 'izJ7Y0MBwcJ8');\n")),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Events")),Object(a.c)("p",null,"Emits ",Object(a.c)("inlineCode",{parentName:"p"},"auth_updated")," on successful authentication."),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Response")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-typescript"}),"type AuthenticationResponse {\n    data: {\n        tokens: {\n            access: AccessToken;\n            refresh: RefreshToken;\n        };\n        user: User;\n    };\n}\n")),Object(a.c)("h2",null,"withToken"),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Parameters")),Object(a.c)("table",null,Object(a.c)("thead",{parentName:"table"},Object(a.c)("tr",{parentName:"thead"},Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Property"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Type"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"center"}),"Required"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Example"))),Object(a.c)("tbody",{parentName:"table"},Object(a.c)("tr",{parentName:"tbody"},Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"refreshToken"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"String"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"center"}),"✔"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"eyJhbGciO6IkpXVCJ9.e30.Et9HFtf9RY7kkTX1wr4qCyhIf58U")))),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Usage")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"await Xedi.Auth.withToken('eyJhbGciO6IkpXVCJ9.e30.Et9HFtf9RY7kkTX1wr4qCyhIf58U');\n")),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Events")),Object(a.c)("p",null,"Emits ",Object(a.c)("inlineCode",{parentName:"p"},"auth_updated")," on successful authentication."),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Response")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-typescript"}),"type AuthenticationResponse {\n    data: {\n        tokens: {\n            access: AccessToken;\n            refresh: RefreshToken;\n        };\n        user: User;\n        business?: Business;\n    };\n}\n")),Object(a.c)("h2",null,"refreshAccessToken"),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Parameters")),Object(a.c)("p",null,Object(a.c)("inlineCode",{parentName:"p"},"null")),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Usage")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"await Xedi.Auth.refreshAccessToken();\n")),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Events")),Object(a.c)("p",null,"Emits ",Object(a.c)("inlineCode",{parentName:"p"},"auth_updated")," on successful renewal of the authentication state."),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Response")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-typescript"}),"type AuthenticationResponse {\n    data: {\n        tokens: {\n            access: AccessToken;\n            refresh: RefreshToken;\n        };\n        user: User;\n        business?: Business;\n    };\n}\n")),Object(a.c)("h2",null,"switchContexts"),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Parameters")),Object(a.c)("table",null,Object(a.c)("thead",{parentName:"table"},Object(a.c)("tr",{parentName:"thead"},Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Property"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Type"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"center"}),"Required"),Object(a.c)("th",Object.assign({parentName:"tr"},{align:"left"}),"Example"))),Object(a.c)("tbody",{parentName:"table"},Object(a.c)("tr",{parentName:"tbody"},Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"business_uuid"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"String"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"center"}),"✔"),Object(a.c)("td",Object.assign({parentName:"tr"},{align:"left"}),"92ac7274-9369-11ea-9521-01002da17977")))),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Usage")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"await Xedi.Auth.switchContexts('92ac7274-9369-11ea-9521-01002da17977');\n")),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Events")),Object(a.c)("p",null,"Emits ",Object(a.c)("inlineCode",{parentName:"p"},"auth_updated")," on successful updating of the authentication context."),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Response")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-typescript"}),"type AuthenticationResponse {\n    data: {\n        tokens: {\n            access: AccessToken;\n            refresh: RefreshToken;\n        };\n        user: User;\n        business: Business;\n    };\n}\n")),Object(a.c)("h2",null,"logout"),Object(a.c)("p",null,"Perminently revoke your refresh token."),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Parameters")),Object(a.c)("p",null,Object(a.c)("inlineCode",{parentName:"p"},"null")),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Usage")),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"await Xedi.Auth.logout();\n")),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Events")),Object(a.c)("p",null,"Emits ",Object(a.c)("inlineCode",{parentName:"p"},"auth_deleted")," on successful revocation of the refresh token."),Object(a.c)("pre",null,Object(a.c)("code",Object.assign({parentName:"pre"},{className:"language-json"}),'{\n    "method": "logout"\n}\n')),Object(a.c)("p",null,Object(a.c)("strong",{parentName:"p"},"Response")),Object(a.c)("p",null,Object(a.c)("inlineCode",{parentName:"p"},"null")))}p.isMDXComponent=!0},748:function(e,t,n){"use strict";var a=n(99),c=n(4),s=n(41),r=n(0),l=n.n(r),i=n(113),p=n(114),b=n(116),u=n(115);function j(e){var t=e.items,n=l.a.useContext(a.a),c=n.ul,s=void 0===c?"ul":c,r=n.li,i=void 0===r?"li":r,p=n.a,b=void 0===p?"a":p;return l.a.createElement(s,null,t.map(function(e){return l.a.createElement(i,{key:e.url},l.a.createElement(b,{href:e.url},e.title),e.items?l.a.createElement(j,{items:e.items}):null)}))}var o=function(e){var t=e.items,n=l.a.useContext(a.a).h2,c=void 0===n?"h2":n;return l.a.createElement(l.a.Fragment,null,l.a.createElement(c,null,"Table of contents"),l.a.createElement(j,{items:t}))},O=n(165);t.a=function(e){var t=e.children,n=e.pageContext,r=l.a.useContext(a.a).h1,j=void 0===r?"h1":r;return l.a.createElement(c.i,{flexDirection:"column",minHeight:"100vh"},l.a.createElement(p.a,{title:n.frontmatter.title,description:n.frontmatter.description}),l.a.createElement(b.a,null),l.a.createElement(c.i,{flex:"1 1 auto",flexDirection:"row"},l.a.createElement(c.e,{display:["none",null,null,"block"]},l.a.createElement(u.a,null)),l.a.createElement(i.a,null,l.a.createElement(j,null,n.frontmatter.title),n.frontmatter.status?l.a.createElement(c.e,{mb:4},l.a.createElement(O.a,{status:n.frontmatter.status})):null,n.tableOfContents.items?l.a.createElement(o,{items:n.tableOfContents.items}):null,t,n.editUrl?l.a.createElement(c.e,{my:6},l.a.createElement(c.k,{href:n.editUrl},l.a.createElement(c.o,{icon:s.e,mr:2}),"Edit this page on GitHub")):null)))}}}]);
//# sourceMappingURL=component---content-usage-auth-mdx-5115033c2a934a8cfde2.js.map